[@lua
  -- handle custom template arguments
  if __CMD_ARGS__["-h"] then
	dbgPrint("Optional arguments for java-json.org template")
	dbgPrint("-package <java package name for generated classes>")
	os.exit()
  end
  javaPKGName = __CMD_ARGS__["-package"] or "com.mobitv.generated.json"
]
/* command to split output: csplit - '/\/\* FILE: /' {*} */
/* FILE: Marshalable.java */
package [@lua return javaPKGName];

import org.json.JSONObject;
import org.json.JSONException;

public interface Marshalable {
    public JSONObject marshal() throws JSONException;
}

/* FILE: JSONObjectAdapter.java */
/* This file was generated by xsdb */
package [@lua return javaPKGName];
import org.apache.commons.codec.DecoderException;
import org.apache.commons.codec.binary.Base64;
import org.apache.commons.codec.binary.Hex;
import org.json.JSONException;
import org.json.JSONObject;


public class JSONObjectAdapter {
	private JSONObject _jObj;
	
	public JSONObjectAdapter(JSONObject jObj) {
		_jObj = jObj;
	}
	JSONObject getJSONObject() {
		return _jObj;
	}
	public boolean getBoolean(String key) throws JSONException {
		return _jObj.getBoolean(key);
	}	
	public String getString(String key) throws JSONException {
		return _jObj.getString(key);
	}	
	public int getInt(String key) throws JSONException {
		return _jObj.getInt(key);
	}
	public long getLong(String key) throws JSONException {
		return _jObj.getLong(key);
	}
	public double getDouble(String key) throws JSONException {
		return _jObj.getDouble(key);
	}	
	public JSONObjectAdapter getObject(String key) throws JSONException {
		return new JSONObjectAdapter(_jObj.getJSONObject(key));
	}
	public JSONArrayAdapter getList(String key) throws JSONException {
		return new JSONArrayAdapter(_jObj.getJSONArray(key));
	}		
	public byte[] getBase64(String key) throws JSONException {
		return Base64.decodeBase64(_jObj.getString(key));
	}
	public byte[] getHex(String key) throws JSONException, DecoderException {
		return Hex.decodeHex(_jObj.getString(key).toCharArray());
	}
	public JSONObjectAdapter put(String key, Boolean value) throws JSONException {
		return new JSONObjectAdapter(_jObj.put(key, value.booleanValue()));
	}	
	public JSONObjectAdapter put(String key, Long value) throws JSONException {
		return new JSONObjectAdapter(_jObj.put(key, value.longValue()));
	}	
	public JSONObjectAdapter put(String key, Integer value) throws JSONException {
		return new JSONObjectAdapter(_jObj.put(key, value.intValue()));
	}
	public JSONObjectAdapter put(String key, boolean value) throws JSONException {
		return new JSONObjectAdapter(_jObj.put(key, value));
	}	
	public JSONObjectAdapter put(String key, String value) throws JSONException {
		return new JSONObjectAdapter(_jObj.put(key, value));
	}
	public JSONObjectAdapter put(String key, int value) throws JSONException {
		return new JSONObjectAdapter(_jObj.put(key, value));
	}
	public JSONObjectAdapter put(String key, long value) throws JSONException {
		return new JSONObjectAdapter(_jObj.put(key, value));
	}
	public JSONObjectAdapter put(String key, double value) throws JSONException {
		return new JSONObjectAdapter(_jObj.put(key, value));
	}
	public JSONObjectAdapter put(String key, JSONArrayAdapter value) throws JSONException {
		return new JSONObjectAdapter(_jObj.put(key, value.getJSONArray()));
	}	
	public JSONObjectAdapter put(String key, JSONObject value) throws JSONException {
		return new JSONObjectAdapter(_jObj.put(key, value));
	}	
	public JSONObjectAdapter putBase64(String key, byte [] buffer) throws JSONException {
		return new JSONObjectAdapter(_jObj.put(key, Base64.encodeBase64String(buffer)));
	}
	public JSONObjectAdapter putHex(String key, byte [] buffer) throws JSONException {
		return new JSONObjectAdapter(_jObj.put(key, Hex.encodeHexString(buffer)));
	}
	public boolean has(String key) {
	   return _jObj.has(key);
	}
}

/* FILE: JSONArrayAdapter.java */
/* This file was generated by xsdb */
package [@lua return javaPKGName];
import org.apache.commons.codec.DecoderException;
import org.apache.commons.codec.binary.Base64;
import org.apache.commons.codec.binary.Hex;
import org.json.JSONArray;
import org.json.JSONException;


public class JSONArrayAdapter {
	private JSONArray _jObj;
	
	public JSONArrayAdapter(JSONArray jObj) {
		_jObj = jObj;
	}
	JSONArray getJSONArray() {
		return _jObj;
	}
	public String getString(int ndx) throws JSONException {
		return _jObj.getString(ndx);
	}	
	public int getInt(int ndx) throws JSONException {
		return _jObj.getInt(ndx);
	}
	public long getLong(int ndx) throws JSONException {
		return _jObj.getLong(ndx);
	}
	public double getDouble(int ndx) throws JSONException {
		return _jObj.getDouble(ndx);
	}	
	public JSONObjectAdapter getObject(int ndx) throws JSONException {
		return new JSONObjectAdapter(_jObj.getJSONObject(ndx));
	}		
	
	public JSONArrayAdapter getList(int ndx) throws JSONException {
		return new JSONArrayAdapter(_jObj.getJSONArray(ndx));
	}		
	public byte[] getBase64(int ndx) throws JSONException {
		return Base64.decodeBase64(_jObj.getString(ndx));
	}
	public byte[] getHex(int ndx) throws JSONException, DecoderException {
		return Hex.decodeHex(_jObj.getString(ndx).toCharArray());
	}	
	public JSONArrayAdapter put(String value) throws JSONException {
		return new JSONArrayAdapter(_jObj.put(value));
	}
	public JSONArrayAdapter put(int value) throws JSONException {
		return new JSONArrayAdapter(_jObj.put(value));
	}
	public JSONArrayAdapter put(long value) throws JSONException {
		return new JSONArrayAdapter(_jObj.put(value));
	}
	public JSONArrayAdapter put(double value) throws JSONException {
		return new JSONArrayAdapter(_jObj.put(value));
	}
	public JSONArrayAdapter put(JSONArrayAdapter value) throws JSONException {
		return new JSONArrayAdapter(_jObj.put(value.getJSONArray()));
	}
	public JSONArrayAdapter put(Marshalable value) throws JSONException {
		return new JSONArrayAdapter(_jObj.put(value.marshal()));
	}
	public JSONArrayAdapter putBase64(byte [] buffer) throws JSONException {
		return new JSONArrayAdapter(_jObj.put(Base64.encodeBase64String(buffer)));
	}
	public JSONArrayAdapter putHex(byte [] buffer) throws JSONException {
		return new JSONArrayAdapter(_jObj.put(Hex.encodeHexString(buffer)));
	}
	public int length() {
		return _jObj.length();
	}
}
[@lua
   -- transform to a more JSON friendly table
   include 'java-json.org/json-transform.lua'
   include 'java-json.org/parse.lua'
   schema = JSONTransform(schema)
   -- make marshalling/unmarshalling code
   return outputJSON(schema)
]
